# Generated by Django 6.0 on 2025-12-06 04:27

import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('business', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ClientIndustry',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('description', models.TextField(blank=True)),
                ('color', models.CharField(default='#6366f1', help_text='Hex color code for charts', max_length=7)),
                ('client_count', models.IntegerField(default=0)),
                ('total_revenue', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
            ],
            options={
                'verbose_name': 'Client Industry',
                'verbose_name_plural': 'Client Industries',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='MediaSentimentRecord',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('period_date', models.DateField()),
                ('positive_count', models.IntegerField(default=0)),
                ('neutral_count', models.IntegerField(default=0)),
                ('negative_count', models.IntegerField(default=0)),
                ('total_reach', models.BigIntegerField(default=0)),
                ('total_engagement', models.BigIntegerField(default=0)),
                ('sentiment_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Overall sentiment score -100 to 100', max_digits=5)),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Media Sentiment Record',
                'verbose_name_plural': 'Media Sentiment Records',
                'ordering': ['-period_date'],
            },
        ),
        migrations.CreateModel(
            name='ActiveEngagement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('title', models.CharField(max_length=255)),
                ('engagement_type', models.CharField(choices=[('RETAINER', 'Retainer'), ('PROJECT', 'Project'), ('AD_HOC', 'Ad-hoc')], default='PROJECT', max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('PAUSED', 'Paused'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='ACTIVE', max_length=20)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('progress', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('notes', models.TextField(blank=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='engagements', to='business.company')),
                ('lead', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='led_engagements', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Active Engagement',
                'verbose_name_plural': 'Active Engagements',
                'ordering': ['-start_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='IPOMandate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('project_name', models.CharField(max_length=255)),
                ('stage', models.CharField(choices=[('INITIAL_CONTACT', 'INITIAL_CONTACT'), ('PITCH', 'PITCH'), ('MANDATE_WON', 'MANDATE_WON'), ('PREPARATION', 'PREPARATION'), ('A1_FILING', 'A1_FILING'), ('HKEX_REVIEW', 'HKEX_REVIEW'), ('SFC_REVIEW', 'SFC_REVIEW'), ('HEARING', 'HEARING'), ('ROADSHOW', 'ROADSHOW'), ('LISTING', 'LISTING'), ('POST_IPO', 'POST_IPO'), ('WITHDRAWN', 'WITHDRAWN')], default='INITIAL_CONTACT', max_length=30)),
                ('target_exchange', models.CharField(default='HKEX', help_text='Target exchange: HKEX, NYSE, NASDAQ, etc.', max_length=20)),
                ('target_board', models.CharField(default='MAIN', help_text='MAIN, GEM, etc.', max_length=30)),
                ('deal_size', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Expected deal size in HKD', max_digits=18)),
                ('deal_size_category', models.CharField(choices=[('SMALL', 'SMALL'), ('MEDIUM', 'MEDIUM'), ('LARGE', 'LARGE'), ('MEGA', 'MEGA')], default='MEDIUM', max_length=20)),
                ('fee_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Fee as percentage of deal size', max_digits=5)),
                ('estimated_fee', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('probability', models.IntegerField(default=50, help_text='Win probability percentage', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('pitch_date', models.DateField(blank=True, null=True)),
                ('mandate_date', models.DateField(blank=True, null=True)),
                ('target_listing_date', models.DateField(blank=True, null=True)),
                ('actual_listing_date', models.DateField(blank=True, null=True)),
                ('sfc_application_date', models.DateField(blank=True, null=True)),
                ('sfc_approval_date', models.DateField(blank=True, null=True)),
                ('is_sfc_approved', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='ipo_mandates', to='business.company')),
                ('lead_partner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='led_ipo_mandates', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'IPO Mandate',
                'verbose_name_plural': 'IPO Mandates',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ListedClient',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('stock_code', models.CharField(help_text='Stock code e.g. 0001.HK', max_length=20)),
                ('exchange', models.CharField(default='HKEX', help_text='Stock exchange: HKEX, NYSE, NASDAQ, etc.', max_length=20)),
                ('sector', models.CharField(blank=True, max_length=100)),
                ('market_cap', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Market capitalization in HKD', max_digits=18)),
                ('status', models.CharField(choices=[('ACTIVE', 'ACTIVE'), ('INACTIVE', 'INACTIVE'), ('PROSPECT', 'PROSPECT'), ('CHURNED', 'CHURNED')], default='ACTIVE', max_length=20)),
                ('contract_start_date', models.DateField(blank=True, null=True)),
                ('contract_end_date', models.DateField(blank=True, null=True)),
                ('annual_retainer', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Annual retainer fee', max_digits=12)),
                ('primary_contact', models.CharField(blank=True, max_length=255)),
                ('contact_email', models.EmailField(blank=True, max_length=254)),
                ('contact_phone', models.CharField(blank=True, max_length=50)),
                ('notes', models.TextField(blank=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='listed_client_records', to='business.company')),
            ],
            options={
                'verbose_name': 'Listed Client',
                'verbose_name_plural': 'Listed Clients',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Announcement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('announcement_type', models.CharField(choices=[('RESULTS', 'RESULTS'), ('INTERIM_RESULTS', 'INTERIM_RESULTS'), ('PROFIT_WARNING', 'PROFIT_WARNING'), ('INSIDE_INFO', 'INSIDE_INFO'), ('NOTIFIABLE_TRANSACTION', 'NOTIFIABLE_TRANSACTION'), ('CONNECTED_TRANSACTION', 'CONNECTED_TRANSACTION'), ('SHARE_REPURCHASE', 'SHARE_REPURCHASE'), ('DIVIDEND', 'DIVIDEND'), ('AGM_EGM', 'AGM_EGM'), ('OTHER', 'OTHER')], default='OTHER', max_length=30)),
                ('title', models.CharField(max_length=500)),
                ('publish_date', models.DateField()),
                ('deadline', models.DateField(blank=True, null=True)),
                ('status', models.CharField(default='DRAFT', help_text='DRAFT, IN_REVIEW, APPROVED, PUBLISHED', max_length=20)),
                ('word_count', models.IntegerField(default=0)),
                ('languages', models.CharField(default='EN,TC', help_text='Languages: EN, TC, SC', max_length=50)),
                ('notes', models.TextField(blank=True)),
                ('handler', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='handled_announcements', to=settings.AUTH_USER_MODEL)),
                ('listed_client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='announcements', to='business.listedclient')),
            ],
            options={
                'verbose_name': 'Announcement',
                'verbose_name_plural': 'Announcements',
                'ordering': ['-publish_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MediaCoverage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('title', models.CharField(max_length=500)),
                ('media_outlet', models.CharField(max_length=255)),
                ('publish_date', models.DateField()),
                ('url', models.URLField(blank=True)),
                ('sentiment', models.CharField(choices=[('POSITIVE', 'POSITIVE'), ('NEUTRAL', 'NEUTRAL'), ('NEGATIVE', 'NEGATIVE')], default='NEUTRAL', max_length=20)),
                ('reach', models.IntegerField(default=0, help_text='Estimated audience reach')),
                ('engagement', models.IntegerField(default=0, help_text='Social media engagement count')),
                ('is_press_release', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='media_coverages', to='business.company')),
                ('listed_client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='media_coverages', to='business.listedclient')),
            ],
            options={
                'verbose_name': 'Media Coverage',
                'verbose_name_plural': 'Media Coverages',
                'ordering': ['-publish_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='RevenueTrend',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('period_year', models.IntegerField()),
                ('period_month', models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('total_revenue', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('recurring_revenue', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('project_revenue', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('new_clients', models.IntegerField(default=0)),
                ('churned_clients', models.IntegerField(default=0)),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Revenue Trend',
                'verbose_name_plural': 'Revenue Trends',
                'ordering': ['-period_year', '-period_month'],
                'unique_together': {('period_year', 'period_month')},
            },
        ),
        migrations.CreateModel(
            name='ClientPerformance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('period_year', models.IntegerField()),
                ('period_quarter', models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(4)])),
                ('revenue_generated', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('satisfaction_score', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('projects_completed', models.IntegerField(default=0)),
                ('referrals_made', models.IntegerField(default=0)),
                ('response_time_hours', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Average response time in hours', max_digits=6)),
                ('notes', models.TextField(blank=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='performance_records', to='business.company')),
            ],
            options={
                'verbose_name': 'Client Performance',
                'verbose_name_plural': 'Client Performances',
                'ordering': ['-period_year', '-period_quarter'],
                'unique_together': {('company', 'period_year', 'period_quarter')},
            },
        ),
        migrations.CreateModel(
            name='ServiceRevenue',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('service_type', models.CharField(choices=[('IPO_ADVISORY', 'IPO Advisory'), ('FINANCIAL_PR', 'Financial PR'), ('INVESTOR_RELATIONS', 'Investor Relations'), ('RESULTS_ANNOUNCEMENT', 'Results Announcement'), ('TRANSACTION_SUPPORT', 'Transaction Support'), ('CRISIS_MANAGEMENT', 'Crisis Management'), ('ESG_ADVISORY', 'ESG Advisory'), ('MEDIA_TRAINING', 'Media Training'), ('OTHER', 'Other')], default='OTHER', max_length=30)),
                ('period_year', models.IntegerField(help_text='Year')),
                ('period_month', models.IntegerField(help_text='Month (1-12)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('billable_hours', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('notes', models.TextField(blank=True)),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='service_revenues', to='business.company')),
            ],
            options={
                'verbose_name': 'Service Revenue',
                'verbose_name_plural': 'Service Revenues',
                'ordering': ['-period_year', '-period_month'],
                'unique_together': {('company', 'service_type', 'period_year', 'period_month')},
            },
        ),
    ]
